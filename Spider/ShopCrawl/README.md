## Shopee 、Lazada 、Myntra 三大平台爬虫
###  动态渲染 selenium，解析库 pyquery
---

> Shopee 、Lazada 、Myntra 三大平台脚本合并

Shopee 、Lazada 、Myntra 三大平台脚本合并，目前是可运行的状态。部分未测试到的商品可能会因页面布局的不同出现报错，碰见后再做修改。

> 运营侧的修改需求：

- 部分描述图片高度过长，图片文件过大，可能导致加载过慢，需按照一个固定高度分隔成若干个小图片
- 由于大部分产品选自 Lazada 平台，需要获取到商品的多种规格

> 问题：

- 目前数据导出是以 csv 文件输出，可能的问题有：
    - 对于包含多段内容的字段，像类别和规格名称，无法多个单元格中，只能放在一个单元格中。所以包含多段内容的字段是以  :  分隔的形式输出。
    - 由于 csv 文件是以逗号分割的，所以内容中包含逗号的均被替换为空字符。

    后期可考虑输出到数据库中，上述问题就不存在了。

- 目前图片储存在以商品名命名的文件夹，
但由于文件名不能包含这些字符 \ /：*？“<>|，所以商品名中包含这些字符的均被替换为空字符。

- 目前脚本尚未能获取到 Lazada 上商品的多种规格, 还需要花时间再研究一番。

> 测试：

以包含10个商品的CSV文件为样本，测试结果和导出数据如下：

- CSV 文件：
包含同一平台下商品的信息，字段包括 平台名、类别、商品名、品牌、原价、现价、规格名称、售后服务、库存（默认1000）、预警值（默认10）、运费（默认15）、商品链接,以及新添加字段：平台名。爬取数据预览如下：完整表格烦请参考 csv 文件

![文档预览](https://s2.ax1x.com/2019/09/04/nE7jVU.jpg)

为了保持商品参数和详细描述的原格式，该部分内容有截图功能以图片形式输出

- 商品名命名的文件夹：
包含该商品的产品图和描述图

![产品文件夹](https://s2.ax1x.com/2019/09/04/nE7ObT.jpg)

描述图命名方式： des.png
产品图命名方式：pro_1.png

![产品图描述图](https://s2.ax1x.com/2019/09/04/nE74Ug.png)

---
> Shopee 平台脚本

shopee 平台脚本目前是可运行的状态，其他商品可能会因页面布局的不同出现报错，遇见后再做修改。

> 测试：

以包含11个商品的CSV文件为样本，测试结果和导出数据如下：
- CSV 文件：
包含同一平台下商品的信息，字段包括平台名、大类、小类、商品名、商品链接、售后服务、品牌、库存（默认1000）、预警值（默认10）、运费（默认15）、多种规格、对应原价、对应现价 

![nEbXh4.jpg](https://s2.ax1x.com/2019/09/04/nEbXh4.jpg)

为了保持商品参数和详细描述的原格式，该部分内容有截图功能以图片形式输出

![nEbLAU.jpg](https://s2.ax1x.com/2019/09/04/nEbLAU.jpg)

- 商品名命名的文件夹：
包含该商品的产品图和描述图
描述图命名方式： des.png
产品图命名方式：pro_1.png

![nEbzcR.png](https://s2.ax1x.com/2019/09/04/nEbzcR.png)


---
> Lazada 平台爬虫

Lazada 平台脚本目前是可运行的状态，部分字段缺失。
其他商品可能会因页面布局的不同出现报错，遇见后再做修改。

> 问题：

- 由于 Lazada 平台的不同商品页面的布局存在差异，暂未能完整获取到不同商品的多种规格搭配，后期需要花时间再研究一番，目前仅可获取到规格名称。

![nEL4Lq.jpg](https://s2.ax1x.com/2019/09/04/nEL4Lq.jpg)

> 测试：

以包含11个商品的CSV文件为样本，测试结果和导出数据如下：
- CSV 文件：
包含同一平台下商品的信息，字段包括类别、商品名、品牌、原价、现价、售后服务、库存（默认1000）、预警值（默认10）、运费（默认15）、规格名称、商品链接

![nEL2WQ.png](https://s2.ax1x.com/2019/09/04/nEL2WQ.png)

由于Lazada平台的类别层级没有一个确定值，而 Shopee的类别层级是有固定的，即大类和小类。
所以，字段类别以[子类别:子类别:子类别]的形式输出，后期有需要分开的需求，可以用分隔符号:进行分栏即可。字段规格名称同理。

为了保持商品参数和详细描述的原格式，该部分内容有截图功能以图片形式输出

![nELsdf.jpg](https://s2.ax1x.com/2019/09/04/nELsdf.jpg)

- 商品名命名的文件夹：
包含该商品的产品图和描述图

![nEOVOI.jpg](https://s2.ax1x.com/2019/09/04/nEOVOI.jpg)

描述图命名方式： des.png
产品图命名方式：pro_1.png
可能因为网络链接加载缓慢，导致下载的图片出现破损的情况

![nELgJg.png](https://s2.ax1x.com/2019/09/04/nELgJg.png)


---
>  Myntra 平台爬虫

Myntra 平台脚本目前是可运行的状态。
其他商品可能会因页面布局的不同出现报错，遇见后再做修改。

> 问题：

- 在 Myntra 平台上截图的描述图片为 透明 png 格式的，主要的影响是不是白底的，图片的颜色会随背景变化，具体原因有待查找。

![nEO49e.jpg](https://s2.ax1x.com/2019/09/04/nEO49e.jpg)

> 测试：

以包含11个商品的CSV文件为样本，测试结果和导出数据如下：

- CSV 文件：
包含同一平台下商品的信息，字段包括类别、商品名、品牌、原价、现价、规格名称、售后服务、库存（默认1000）、预警值（默认10）、运费（默认15）、商品链接

![nEOIcd.png](https://s2.ax1x.com/2019/09/04/nEOIcd.png)

由于 Myntra 平台的类别层级没有一个确定值，而 Shopee的类别层级是有固定的，即大类和小类。
所以，字段类别以 [子类别:子类别:子类别] 的形式输出，后期有需要分开的需求再更改，Excel表可以用分隔符号:进行分栏即可。字段规格名称同理。

为了保持商品参数和详细描述的原格式，该部分内容有截图功能以图片形式输出: 图片为 透明 png 格式

- 商品名命名的文件夹：
包含该商品的产品图和描述图

![nEOfhD.jpg](https://s2.ax1x.com/2019/09/04/nEOfhD.jpg)

描述图命名方式： des.png
产品图命名方式：pro_1.png

![nEO51H.png](https://s2.ax1x.com/2019/09/04/nEO51H.png)


如有疑问或更改需求，请指出。





