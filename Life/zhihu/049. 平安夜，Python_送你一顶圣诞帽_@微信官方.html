<!DOCTYPE html><html><head><meta charset="utf-8"></head><body><h1>平安夜，Python_送你一顶圣诞帽_@微信官方</h1><div class="RichText ztext Post-RichText">
 <p>
  还有多少耿直boy和我一样在等待微信官方送上一顶圣诞帽？
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic3.zhimg.com/v2-2325041fadda105fa4ba869805d7424c_r.jpg" data-rawheight="1138" data-rawwidth="640" data-size="normal" src="https://pic3.zhimg.com/v2-2325041fadda105fa4ba869805d7424c_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic3.zhimg.com/v2-2325041fadda105fa4ba869805d7424c_b.jpg" data-caption="" data-original="https://pic3.zhimg.com/v2-2325041fadda105fa4ba869805d7424c_r.jpg" data-rawheight="1138" data-rawwidth="640" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='1138'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  最后知道真相的我眼泪掉下来……
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic1.zhimg.com/v2-7e5a6a4d0ac94f0129a7cba1154be0ef_r.jpg" data-rawheight="115" data-rawwidth="550" data-size="normal" src="https://pic1.zhimg.com/v2-7e5a6a4d0ac94f0129a7cba1154be0ef_b.jpg" width="550"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-7e5a6a4d0ac94f0129a7cba1154be0ef_b.jpg" data-caption="" data-original="https://pic1.zhimg.com/v2-7e5a6a4d0ac94f0129a7cba1154be0ef_r.jpg" data-rawheight="115" data-rawwidth="550" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='550'%20height='115'&gt;&lt;/svg&gt;" width="550"/>
 </figure>
 <p>
  （还蒙在鼓里的同学请在微信最上方的搜索栏自行搜索『圣诞帽』）
 </p>
 <p>
  <br/>
 </p>
 <p>
  好吧，你不给，咱自己来，不就是个帽子嘛。
 </p>
 <h2>
  Python 在手，圣诞帽我有！
 </h2>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-e9e73677e82129b36f48795b3d1ae730_r.jpg" data-rawheight="360" data-rawwidth="640" data-size="normal" src="https://pic2.zhimg.com/v2-e9e73677e82129b36f48795b3d1ae730_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic2.zhimg.com/v2-e9e73677e82129b36f48795b3d1ae730_b.jpg" data-caption="" data-original="https://pic2.zhimg.com/v2-e9e73677e82129b36f48795b3d1ae730_r.jpg" data-rawheight="360" data-rawwidth="640" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='360'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic4.zhimg.com/v2-d39ee02a98243890bb024677e498dd86_r.jpg" data-rawheight="386" data-rawwidth="640" data-size="normal" src="https://pic4.zhimg.com/v2-d39ee02a98243890bb024677e498dd86_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic4.zhimg.com/v2-d39ee02a98243890bb024677e498dd86_b.jpg" data-caption="" data-original="https://pic4.zhimg.com/v2-d39ee02a98243890bb024677e498dd86_r.jpg" data-rawheight="386" data-rawwidth="640" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='386'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic4.zhimg.com/v2-b69a47a696e7195d19db6e5284d52c09_r.jpg" data-rawheight="426" data-rawwidth="640" data-size="normal" src="https://pic4.zhimg.com/v2-b69a47a696e7195d19db6e5284d52c09_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic4.zhimg.com/v2-b69a47a696e7195d19db6e5284d52c09_b.jpg" data-caption="" data-original="https://pic4.zhimg.com/v2-b69a47a696e7195d19db6e5284d52c09_r.jpg" data-rawheight="426" data-rawwidth="640" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='426'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  <b>
   OpenCV 库
  </b>
  加上几张圣诞帽图片，三四十行代码轻松搞定。只不过调试的时候要注意点，图像坐标和像素矩阵索引的维度别搞乱了。
 </p>
 <p>
  <br/>
 </p>
 <p>
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic3.zhimg.com/v2-ae2379dd2201795156b99c309a9282f7_r.jpg" data-rawheight="249" data-rawwidth="528" data-size="normal" src="https://pic3.zhimg.com/v2-ae2379dd2201795156b99c309a9282f7_b.jpg" width="528"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic3.zhimg.com/v2-ae2379dd2201795156b99c309a9282f7_b.jpg" data-caption="" data-original="https://pic3.zhimg.com/v2-ae2379dd2201795156b99c309a9282f7_r.jpg" data-rawheight="249" data-rawwidth="528" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='528'%20height='249'&gt;&lt;/svg&gt;" width="528"/>
 </figure>
 <p>
  大致步骤：
 </p>
 <ol>
  <li>
   安装 OpenCV（网上搜下教程有很多）；
  </li>
  <li>
   用 OpenCV 提供的级联分类器做
   <b>
    人脸检测
   </b>
   ，定位出图片中的人脸位置；
  </li>
  <li>
   根据找出的人脸，调整圣诞帽的位置和大小，叠加到原图片上；
  </li>
  <li>
   遍历所有人脸，重复执行步骤3，过程中可随机变换帽子的样式；
  </li>
  <li>
   保存图片。
  </li>
 </ol>
 <p>
  OpenCV 人脸检测代码：
 </p>
 <div class="highlight">
  <pre><code class="language-python3"><span></span><span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># OpenCV 人脸检测</span>
<span class="n">face_patterns</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CascadeClassifier</span><span class="p">(</span>
    <span class="s1">'haarcascade_frontalface_default.xml'</span>
<span class="p">)</span>
<span class="n">sample_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">'img/face2.jpg'</span><span class="p">)</span>
<span class="n">faces</span> <span class="o">=</span> <span class="n">face_patterns</span><span class="o">.</span><span class="n">detectMultiScale</span><span class="p">(</span>
    <span class="n">sample_image</span><span class="p">,</span>
    <span class="n">scaleFactor</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span>
    <span class="n">minNeighbors</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">minSize</span><span class="o">=</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="p">)</span>
</code></pre>
 </div>
 <p>
  源代码已上传，公众号（
  <b>
   Crossin的编程教室
  </b>
  ）中回复
  <b>
   圣诞帽
  </b>
  可获取下载地址。
 </p>
 <p>
  <br/>
 </p>
 <p>
  ════
  <br/>
 </p>
 <p>
  <i>
   其他文章及回答：
  </i>
 </p>
 <blockquote>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/30932804">
   一名python学习者打开双11的正确姿势
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/29043669">
   Python有嘻哈：Crossin教你用代码写出押韵的verse
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/26066151">
   喏，你们要的 PyCharm 快速上手指南
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/25824007">
   给伸手党的福利：Python 新手入门引导
  </a>
  <br/>
  <a class="internal" href="https://www.zhihu.com/question/22863981/answer/22923499">
   学习编程的过程中可能会走哪些弯路，有哪些经验可以参考？
  </a>
  <br/>
  <a class="internal" href="https://www.zhihu.com/question/20702054/answer/19022301">
   你是如何自学 Python 的？
  </a>
 </blockquote>
 <p>
  Crossin的编程教室
 </p>
 <blockquote>
  微信公众号ID：crossincode
  <br/>
  网站：
  <a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//crossincode.com/" rel="nofollow noreferrer" target="_blank">
   crossincode.com
  </a>
  <br/>
  论坛：
  <a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//bbs.crossincode.com" rel="nofollow noreferrer" target="_blank">
   bbs.crossincode.com
  </a>
 </blockquote>
 <figure>
  <noscript>
   <img class="content_image" data-caption="" data-rawheight="258" data-rawwidth="258" data-size="normal" src="https://pic4.zhimg.com/5b886398336f8058c0ecafdc5d85c857_b.jpg" width="258"/>
  </noscript>
  <img class="content_image lazy" src="https://pic4.zhimg.com/5b886398336f8058c0ecafdc5d85c857_b.jpg" data-caption="" data-rawheight="258" data-rawwidth="258" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='258'%20height='258'&gt;&lt;/svg&gt;" width="258"/>
 </figure>
 <p>
 </p>
</div></body></html>