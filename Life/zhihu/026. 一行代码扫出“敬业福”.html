<!DOCTYPE html><html><head><meta charset="utf-8"></head><body><h1>一行代码扫出“敬业福”</h1><div class="RichText ztext Post-RichText">
 <p>
  好吧，我承认有那么一点标题党。不过说起标题党这事儿，咱先来看看支付BAO，最近几天搞得全国人民都不安心工作的“集五福”：
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic3.zhimg.com/v2-a18d06ee72eeac5c04f578d2b3db6ad9_r.jpg" data-rawheight="639" data-rawwidth="640" src="https://pic3.zhimg.com/v2-a18d06ee72eeac5c04f578d2b3db6ad9_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic3.zhimg.com/v2-a18d06ee72eeac5c04f578d2b3db6ad9_b.jpg" data-original="https://pic3.zhimg.com/v2-a18d06ee72eeac5c04f578d2b3db6ad9_r.jpg" data-rawheight="639" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='639'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  好（shua）好（hou）的“集五福”活动，怎么又叫 AR 了？
  <br/>
 </p>
 <p>
  我们来让李老板家的百科解释下什么是 AR：
 </p>
 <blockquote>
  <p>
   增强现实技术（Augmented Reality，简称 AR），是一种实时地计算摄影机影像的位置及角度并加上相应图像、视频、3D模型的技术，这种技术的目标是在屏幕上把虚拟世界套在现实世界并进行互动。
  </p>
 </blockquote>
 <p>
  可是，哥好歹当年在学校也是研究计算机视觉和图形学出身啊。据我所知，AR 的画风不是应该这样：
  <a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//mmbiz.qpic.cn/mmbiz_gif/icic13vic5h8JGZ7ZSbvUrwciasY462OO4nf9UcDxnB52yuyDEibU4eSH1wXpRNyfUaicH4m8frl6kiaXt50IibbEYoXNQ/0%3Fwx_fmt%3Dgif%26tp%3Dwebp%26wxfrom%3D5%26wx_lazy%3D1" rel="nofollow noreferrer" target="_blank">
   【查看动图 1】
  </a>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-1bce3cb5a0319129b0311e603b4e7b50_r.jpg" data-rawheight="770" data-rawwidth="1404" src="https://pic1.zhimg.com/v2-1bce3cb5a0319129b0311e603b4e7b50_b.jpg" width="1404"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-1bce3cb5a0319129b0311e603b4e7b50_b.jpg" data-original="https://pic1.zhimg.com/v2-1bce3cb5a0319129b0311e603b4e7b50_r.jpg" data-rawheight="770" data-rawwidth="1404" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1404'%20height='770'&gt;&lt;/svg&gt;" width="1404"/>
 </figure>
 <p>
  或者这样的嘛：
  <a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//mmbiz.qpic.cn/mmbiz_gif/icic13vic5h8JGZ7ZSbvUrwciasY462OO4nfaRjlg1WZAkm82WxSbCpzOO2XdLlW8ISchViciaicqzt1o32McnsVkCicOQ/0%3Fwx_fmt%3Dgif%26tp%3Dwebp%26wxfrom%3D5%26wx_lazy%3D1" rel="nofollow noreferrer" target="_blank">
   【查看动图 2】
  </a>
 </p>
 <figure>
  <noscript>
   <img class="content_image" data-rawheight="301" data-rawwidth="370" src="https://pic1.zhimg.com/v2-c40533dec75212335dbe91f7e8d57204_b.jpg" width="370"/>
  </noscript>
  <img class="content_image lazy" src="https://pic1.zhimg.com/v2-c40533dec75212335dbe91f7e8d57204_b.jpg" data-rawheight="301" data-rawwidth="370" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='370'%20height='301'&gt;&lt;/svg&gt;" width="370"/>
 </figure>
 <p>
  怎么就变成摄像头识别文字了？
  <br/>
 </p>
 <p>
  看着手中的 App，我不禁开始怀疑，难道我是学了假的 AR……
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-41e47d251ec54ff1d8bea89b8daef16c_r.jpg" data-rawheight="391" data-rawwidth="453" src="https://pic1.zhimg.com/v2-41e47d251ec54ff1d8bea89b8daef16c_b.jpg" width="453"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-41e47d251ec54ff1d8bea89b8daef16c_b.jpg" data-original="https://pic1.zhimg.com/v2-41e47d251ec54ff1d8bea89b8daef16c_r.jpg" data-rawheight="391" data-rawwidth="453" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='453'%20height='391'&gt;&lt;/svg&gt;" width="453"/>
 </figure>
 <p>
  后来旁边人跟我说，你没看扫到“福”之后有个烟花的效果吗？人家这就是虚实结合！
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-c15d3d0ed4e689aa0509a1e89929a776_r.jpg" data-rawheight="1139" data-rawwidth="640" src="https://pic1.zhimg.com/v2-c15d3d0ed4e689aa0509a1e89929a776_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-c15d3d0ed4e689aa0509a1e89929a776_b.jpg" data-original="https://pic1.zhimg.com/v2-c15d3d0ed4e689aa0509a1e89929a776_r.jpg" data-rawheight="1139" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='1139'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  好吧！这 OCR 文字识别+五毛特效，我也可以分分钟给你搞一个啊。
  <br/>
 </p>
 <p>
  说干就干。想起咱们教室的“编程实例”中就有一个“验证码识别”的例子，直接改改就行。
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic3.zhimg.com/v2-451c4fdce6904203b21c372c119d308c_r.jpg" data-rawheight="405" data-rawwidth="640" src="https://pic3.zhimg.com/v2-451c4fdce6904203b21c372c119d308c_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic3.zhimg.com/v2-451c4fdce6904203b21c372c119d308c_b.jpg" data-original="https://pic3.zhimg.com/v2-451c4fdce6904203b21c372c119d308c_r.jpg" data-rawheight="405" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='405'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  顺便再科普一下 OCR：
 </p>
 <blockquote>
  <p>
   OCR （Optical Character Recognition，光学字符识别）是指电子设备（例如扫描仪或数码相机）检查纸上打印的字符，通过检测暗、亮的模式确定其形状，然后用字符识别方法将形状翻译成计算机文字的过程
  </p>
 </blockquote>
 <p>
  反正我只是打算识别出“福”字，那么问题就很简单了。装备上别人已经打造好的工具：
 </p>
 <ol>
  <li>
   <p>
    安装 PIL 库
   </p>
   <div class="highlight">
    <pre><code class="language-text"><span></span>pip install pillow
</code></pre>
   </div>
  </li>
  <li>
   <p>
    下载安装 ocr 的库，这里我们选择 tesseract-ocr
   </p>
   <p>
    <a class=" wrap external" href="https://link.zhihu.com/?target=https%3A//github.com/tesseract-ocr/tesseract" rel="nofollow noreferrer" target="_blank">
     tesseract-ocr/tesseract
    </a>
    <br/>
   </p>
  </li>
  <li>
   <p>
    下载安装Python 的 tesseract 驱动模块
   </p>
   <div class="highlight">
    <pre><code class="language-text"><span></span>pip install pytesseract
</code></pre>
   </div>
  </li>
  <li>
   <p>
    下载 tesseract 的简体中文训练数据集（放在 tessdata 目录里）
   </p>
   <p>
    <a class=" external" href="https://link.zhihu.com/?target=https%3A//github.com/tesseract-ocr/tessdata/raw/master/chi_sim.traineddata" rel="nofollow noreferrer" target="_blank">
     <span class="invisible">
      https://
     </span>
     <span class="visible">
      github.com/tesseract-oc
     </span>
     <span class="invisible">
      r/tessdata/raw/master/chi_sim.traineddata
     </span>
     <span class="ellipsis">
     </span>
    </a>
   </p>
  </li>
 </ol>
 <p>
  然后做一张带有文字的图片：
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic4.zhimg.com/v2-c27074eecd9900f5b8457077d022d59c_r.jpg" data-rawheight="140" data-rawwidth="640" src="https://pic4.zhimg.com/v2-c27074eecd9900f5b8457077d022d59c_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic4.zhimg.com/v2-c27074eecd9900f5b8457077d022d59c_b.jpg" data-original="https://pic4.zhimg.com/v2-c27074eecd9900f5b8457077d022d59c_r.jpg" data-rawheight="140" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='140'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  最后，一行代码识别文字（import 啥的当然不算数啦！）：
  <br/>
 </p>
 <div class="highlight">
  <pre><code class="language-python"><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">pytesseract</span>
<span class="k">print</span> <span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">'/your/path/to/fu.jpg'</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s1">'chi_sim'</span><span class="p">)</span>
</code></pre>
 </div>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic4.zhimg.com/v2-afe777ed651ad8111079bb9d6fcada17_r.jpg" data-rawheight="57" data-rawwidth="640" src="https://pic4.zhimg.com/v2-afe777ed651ad8111079bb9d6fcada17_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic4.zhimg.com/v2-afe777ed651ad8111079bb9d6fcada17_b.jpg" data-original="https://pic4.zhimg.com/v2-afe777ed651ad8111079bb9d6fcada17_r.jpg" data-rawheight="57" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='57'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  搞定。
  <br/>
 </p>
 <p>
  核心功能都有了，你再加上摄像头拍摄、图像处理、反馈特效，也只是时间问题。大过年的，我也编不下去了。
  <br/>
 </p>
 <p>
  当然，这种通用 ocr 模块并不总那么靠谱，比如：
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic2.zhimg.com/v2-961f1050a192caf8b3bbb6a5afdb0235_r.jpg" data-rawheight="408" data-rawwidth="640" src="https://pic2.zhimg.com/v2-961f1050a192caf8b3bbb6a5afdb0235_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic2.zhimg.com/v2-961f1050a192caf8b3bbb6a5afdb0235_b.jpg" data-original="https://pic2.zhimg.com/v2-961f1050a192caf8b3bbb6a5afdb0235_r.jpg" data-rawheight="408" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='408'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  正所谓，祸兮福所倚，福兮祸所伏，大概就是这个道理吧……
  <br/>
 </p>
 <p>
  什么？你说我这个识别太弱了？可是马云爸爸家的也没好到哪里啊！
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic3.zhimg.com/v2-eed2bdf25a345fd40d0bb66bbea0f714_r.jpg" data-rawheight="1139" data-rawwidth="640" src="https://pic3.zhimg.com/v2-eed2bdf25a345fd40d0bb66bbea0f714_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic3.zhimg.com/v2-eed2bdf25a345fd40d0bb66bbea0f714_b.jpg" data-original="https://pic3.zhimg.com/v2-eed2bdf25a345fd40d0bb66bbea0f714_r.jpg" data-rawheight="1139" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='1139'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <p>
  所以你真以为我会去满世界的找“福”字吗？年轻人啊，还是应该多提高自己的姿势水平哟。
  <br/>
 </p>
 <p>
  最后，就用这段小代码给大家送上新年祝福。希望各位勤劳好学的宝宝们，在酒足饭饱之后、吐槽春晚之余、麻将自摸之前，
  <u>
   别忘了给家中有理想有追求的小伙伴们推荐我们的公众号“
   <strong>
    Crossin的编程教室
   </strong>
   ”。
  </u>
  <br/>
 </p>
 <p>
  来年我们一起用代码躁起来！
  <br/>
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic4.zhimg.com/v2-95ddbe1552b0d5b314516ab01e389d0a_r.jpg" data-rawheight="123" data-rawwidth="640" src="https://pic4.zhimg.com/v2-95ddbe1552b0d5b314516ab01e389d0a_b.jpg" width="640"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic4.zhimg.com/v2-95ddbe1552b0d5b314516ab01e389d0a_b.jpg" data-original="https://pic4.zhimg.com/v2-95ddbe1552b0d5b314516ab01e389d0a_r.jpg" data-rawheight="123" data-rawwidth="640" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='640'%20height='123'&gt;&lt;/svg&gt;" width="640"/>
 </figure>
 <br/>
 <br/>
 <p>
  <u>
   其他文章及回答：
  </u>
  <br/>
 </p>
 <p>
  <a class="internal" href="https://www.zhihu.com/question/22863981/answer/22923499">
   学习编程的过程中可能会走哪些弯路，有哪些经验可以参考？ - Crossin 的回答
  </a>
  <br/>
  <a class="internal" href="https://www.zhihu.com/question/20702054/answer/19022301">
   你是如何自学 Python 的？ - Crossin 的回答
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/24865235">
   在这个看脸的时代，如何用 GUI 提高 python 程序的颜值？ - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/24952863">
   ECharts+Python 给你的数据做“美颜” - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/24606846">
   今天，你抢到票了吗 - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/22261597">
   Python 与 Excel 不得不说的事 - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/23998083">
   Python-Excel 模块哪家强？- Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/22339492">
   爆款游戏《贪吃蛇大作战》的 Python 实现 - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/22917775">
   NBA 举办编程马拉松 - 数据分析时代的到来 - Crossin的文章 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/21886694">
   想用 Python 做数据分析？先玩玩这个再说 - Crossin的文章 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/21624000">
   用 Python 实现你的量化交易策略 - Crossin的文章 - 知乎专栏
  </a>
  <br/>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/21057822">
   Python 抓取网页乱码原因分析 - Crossin的编程教室 - 知乎专栏
  </a>
  <br/>
 </p>
 <p>
  <b>
   Crossin的编程教室
  </b>
 </p>
 <p>
  微信ID：crossincode
  <br/>
  论坛：
  <a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//bbs.crossincode.com" rel="nofollow noreferrer" target="_blank">
   Crossin的编程教室
  </a>
  <br/>
  QQ群：453300655
  <br/>
  <figure>
   <noscript>
    <img class="content_image" data-rawheight="258" data-rawwidth="258" src="https://pic4.zhimg.com/5b886398336f8058c0ecafdc5d85c857_b.jpg" width="258"/>
   </noscript>
   <img class="content_image lazy" src="https://pic4.zhimg.com/5b886398336f8058c0ecafdc5d85c857_b.jpg" data-rawheight="258" data-rawwidth="258" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='258'%20height='258'&gt;&lt;/svg&gt;" width="258"/>
  </figure>
 </p>
</div></body></html>