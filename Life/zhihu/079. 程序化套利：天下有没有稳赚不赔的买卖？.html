<!DOCTYPE html><html><head><meta charset="utf-8"></head><body><h1>程序化套利：天下有没有稳赚不赔的买卖？</h1><div class="RichText ztext Post-RichText">
 <p>
  本届世界杯即将迎来大结局，四强多少有些出乎赛前的意料。最终是否会有新的冠军出现，大家拭目以待。
 </p>
 <p>
  我们之前有两篇文章谈到了世界杯（
  <a class="internal" href="http://zhuanlan.zhihu.com/p/37981169">
   根据四万场比赛结果，我给今年世界杯每场比赛计算了胜率，冠军竟然是…
  </a>
  |
  <a class="internal" href="http://zhuanlan.zhihu.com/p/38822438">
   Crossin：世界杯竞猜，怎么选会赚
  </a>
  ），且都涉及到了这次很热的话题：
  <b>
   足彩
  </b>
  。
 </p>
 <p>
  尽管我自己这次做了不少神棍预言，而且还蒙对了一些，但其实我从头到尾都没有买过1块钱。（有天准备买德国输的，结果系统繁忙未成功……）
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-0b6ae6630f9e7cb0548fdacfa3ecc81f_r.jpg" data-rawheight="98" data-rawwidth="1080" data-size="normal" src="https://pic2.zhimg.com/v2-0b6ae6630f9e7cb0548fdacfa3ecc81f_b.jpg" width="1080"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic2.zhimg.com/v2-0b6ae6630f9e7cb0548fdacfa3ecc81f_b.jpg" data-caption="" data-original="https://pic2.zhimg.com/v2-0b6ae6630f9e7cb0548fdacfa3ecc81f_r.jpg" data-rawheight="98" data-rawwidth="1080" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1080'%20height='98'&gt;&lt;/svg&gt;" width="1080"/>
 </figure>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic1.zhimg.com/v2-bca9f21466dda56da77a31c51f2b2f79_r.jpg" data-rawheight="310" data-rawwidth="972" data-size="normal" src="https://pic1.zhimg.com/v2-bca9f21466dda56da77a31c51f2b2f79_b.jpg" width="972"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-bca9f21466dda56da77a31c51f2b2f79_b.jpg" data-caption="" data-original="https://pic1.zhimg.com/v2-bca9f21466dda56da77a31c51f2b2f79_r.jpg" data-rawheight="310" data-rawwidth="972" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='972'%20height='310'&gt;&lt;/svg&gt;" width="972"/>
 </figure>
 <p>
  因为我对于这种从概率角度来看必然亏本的事情没有多大兴趣。
 </p>
 <p>
  不过话说回来，是否真有
  <b>
   稳赚不赔的方法
  </b>
  呢？
 </p>
 <p>
  <b>
   理论上来说
  </b>
  ，是
  <b>
   有的
  </b>
  。
 </p>
 <p>
  通常，菠菜公司开出的赔率会根据用户下注的情况来调整，保证任何一种情况发生都有的赚。而如果你同时押注各种情况，无论你怎么调整比例，最优情况
  <b>
   回报率也是小于1
  </b>
  ，也就是稳亏不赚。但地球上不是只有一家菠菜公司，各家的赔率虽大同小异但也肯定会有差异，尤其在牵涉到有主队的时候，情感的倾向会影响理性的判断。同时，为了吸引更多人到自己这里来投注，很多公司会尽可能提高回报率，使其接近于1。于是，
  <b>
   在极少数特殊的情况下
  </b>
  ，就会出现通过不同的公司按照一定的比例投注，可以保证
  <b>
   回报率大于1
  </b>
  。
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-1cf0a505dcfab2d11f3a03817e18cd50_r.jpg" data-rawheight="461" data-rawwidth="1080" data-size="normal" src="https://pic2.zhimg.com/v2-1cf0a505dcfab2d11f3a03817e18cd50_b.jpg" width="1080"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic2.zhimg.com/v2-1cf0a505dcfab2d11f3a03817e18cd50_b.jpg" data-caption="" data-original="https://pic2.zhimg.com/v2-1cf0a505dcfab2d11f3a03817e18cd50_r.jpg" data-rawheight="461" data-rawwidth="1080" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1080'%20height='461'&gt;&lt;/svg&gt;" width="1080"/>
 </figure>
 <p>
  上图是
  <b>
   法国对比利时
  </b>
  的半决赛前某一时刻的赔率（这网站上是不计算返本的比例，换算成我们通常说的赔率要+1）。如果我们分别选取赔率最高的3家，组成
  <b>
   胜8/5；负213/100；平12/5
  </b>
  （即
  <b>
   2.6
  </b>
  :
  <b>
   3.13
  </b>
  :
  <b>
   3.4
  </b>
  ）的组合。然后分别购买
 </p>
 <p>
  100/(2.6/(2.6+3.13+3.4)) ≈
  <b>
   351
  </b>
 </p>
 <p>
  100/(3.13/(2.6+3.13+3.4)) ≈
  <b>
   292
  </b>
 </p>
 <p>
  100/(3.4/(2.6+3.13+3.4)) ≈
  <b>
   268
  </b>
 </p>
 <p>
  共花费 351+292+268 =
  <b>
   911
  </b>
 </p>
 <p>
  如果法国胜，获得 351*(8/5+1)=
  <b>
   912.6
  </b>
  ；比利时胜获得 292*(213/100+1)=
  <b>
   913.96
  </b>
  ；打平获得 268*(12/5+1)=
  <b>
   911.2
  </b>
  。
 </p>
 <p>
  无论哪种结局，你都
  <b>
   稳赚不亏
  </b>
  ，尽管这利润非常小。
 </p>
 <p>
  这种操作可不是我胡诌的。它就是在金融领域被广泛使用的“
  <b>
   套利
  </b>
  ”手段。维基百科关于
  <b>
   套利
  </b>
  的解释：
 </p>
 <blockquote>
  通常指在
  <b>
   某种实物资产或金融资产
  </b>
  （在
  <b>
   同一市场或不同市场
  </b>
  ）拥有
  <b>
   两个价格
  </b>
  的情况下，以较低的价格买进，较高的价格卖出，从而获取低风险的收益。
 </blockquote>
 <p>
  除了价格差这个必要因素外，套利的机会一般还有以下特征：
 </p>
 <ol>
  <li>
   <b>
    收益率通常不高
   </b>
   ，所以需要有很
   <b>
    大资金
   </b>
   投入
  </li>
  <li>
   <b>
    时间窗口短
   </b>
   ，价差会因套利行为而逐渐被填平
  </li>
 </ol>
 <p>
  <b>
   博彩套利
  </b>
  就是一种真实存在的套利场景。然而，为什么我特地要加上“
  <b>
   理论上来说
  </b>
  ”这几个字？因为实际上，这事情并是不那么可操作和无风险：
 </p>
 <ol>
  <li>
   因为一些原因，你并
   <b>
    不能
   </b>
   去这些网站投注。
  </li>
  <li>
   即便你有条件排除上一条问题，并不是
   <b>
    任何比赛
   </b>
   的
   <b>
    任何时刻
   </b>
   都有这种
   <b>
    回报率大于1
   </b>
   的组合。
  </li>
  <li>
   即使机会出现，也是
   <b>
    稍纵即逝
   </b>
   ，有很多跟你一样想法的人在抢这个机会，赔率很快就会被拉平。在这短暂的瞬间，你是否能完成不同公司的投注？如果过程中有一个赔率下落，可能就亏了。
  </li>
  <li>
   你的投注本身也在影响着实时赔率。前面说过，只有大资金套利才有意义。存在
   <b>
    套利的空间未必足够你获利的资金量
   </b>
   。
  </li>
  <li>
   还有一个不得不考虑的风险，就是
   <b>
    庄家的跑路
   </b>
   。虽然这是个极小概率事件，但在高成本低收益的行为中，一旦发生就前功尽弃。
  </li>
 </ol>
 <p>
  如果综合各种风险和成本之后，仍然有足够的收益，那么这件事就很可能有人去做，且必定离不开
  <b>
   程序的辅助
  </b>
  。比如你可以通过
  <b>
   爬虫
  </b>
  获取不同网站当前的
  <b>
   最新赔率
  </b>
  ，自动算出当前的最优组合是否有足够的套利空间，然后再对接上各家相应的
  <b>
   投注接口
  </b>
  ，那么就可以在别人之前抢得先机。反过来，也正因为越来越多计算机程序的介入，使得各种市场上套利的空间越来越小，成为
  <b>
   套利均衡
  </b>
  的
  <b>
   无套利机会市场
  </b>
  。
 </p>
 <p>
  顺便讲讲其他常见的一些套利场景：
 </p>
 <p>
  最简单的就是
  <b>
   价差套利
  </b>
  。比如
  <b>
   商品价差
  </b>
  ，同一种商品，不同城市间价格不一样，即使算上运输和仓储成本也仍有利润空间，那么就可以从低价城市买入，运到高价城市卖出。玩过《大航海时代》的人对此一定不陌生。还有
  <b>
   股票价差套利
  </b>
  ，这要求同一支股票在不同交易所上市且存在较大价差。这个领域早已进入
  <b>
   程序化交易
  </b>
  的战场，人肉寻找机会就别想了。
 </p>
 <p>
  <b>
   期现套利
  </b>
  也是一种典型场景。
  <b>
   期货
  </b>
  和
  <b>
   现货
  </b>
  在合约到期时，价格会趋向一致，但在之前，很可能因为波动而产生较大偏离，从而出现套利机会。不过和其他金融套利机会一样，需要
  <b>
   足够大的资金
  </b>
  和
  <b>
   足够快的程序
  </b>
  。
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-4029615efc380ce260da7cd96029f85a_r.jpg" data-rawheight="300" data-rawwidth="450" data-size="normal" src="https://pic2.zhimg.com/v2-4029615efc380ce260da7cd96029f85a_b.jpg" width="450"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic2.zhimg.com/v2-4029615efc380ce260da7cd96029f85a_b.jpg" data-caption="" data-original="https://pic2.zhimg.com/v2-4029615efc380ce260da7cd96029f85a_r.jpg" data-rawheight="300" data-rawwidth="450" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='450'%20height='300'&gt;&lt;/svg&gt;" width="450"/>
 </figure>
 <p>
  最近几年，又有了一个绝佳的套利市场：
  <b>
   加密货币
  </b>
  （包括但不限于
  <b>
   比特币
  </b>
  ）。这个市场就像是给原始社会的野蛮人提供了现代的武器，各种金融工具摆脱了监管，应用在了这个市场上。在早些时候，不同交易所直接的价差波动甚至大到即使手工操作，也有远高于常规投资的收益率。随着参与的人越来越多，手续费的升高，再加上很多交易所开放了
  <b>
   API
  </b>
  供
  <b>
   程序化交易
  </b>
  使用，现在这个市场的利润也越来越薄。另外，政策和“骗子”也成了此种套利的最大风险。
 </p>
 <figure>
  <noscript>
   <img class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-89c338e1661efd89c589a3f31f30a5c1_r.jpg" data-rawheight="1003" data-rawwidth="1080" data-size="normal" src="https://pic1.zhimg.com/v2-89c338e1661efd89c589a3f31f30a5c1_b.jpg" width="1080"/>
  </noscript>
  <img class="origin_image zh-lightbox-thumb lazy" src="https://pic1.zhimg.com/v2-89c338e1661efd89c589a3f31f30a5c1_b.jpg" data-original="https://pic1.zhimg.com/v2-89c338e1661efd89c589a3f31f30a5c1_r.jpg" data-rawheight="1003" data-rawwidth="1080" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1080'%20height='1003'&gt;&lt;/svg&gt;" width="1080"/>
  <figcaption>
   某交易所API示例
  </figcaption>
 </figure>
 <p>
  以上仅为我个人对套利的一些浅见，绝对谈不上专业。有对这方面了解的，欢迎在留言中补充和指正。我知道咱们教室里就有不少这方面的专家。不过我也知道，毕竟这种牵扯到真金白银的事情嘛，
  <b>
   闷声发大财才是坠吼的
  </b>
  👓
 </p>
 <p>
  <br/>
 </p>
 <p>
  <br/>
  ════
  <br/>
  <i>
   其他文章及回答：
  </i>
 </p>
 <p>
  <a class="internal" href="https://www.zhihu.com/question/20702054/answer/19022301">
   如何自学Python
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/25824007">
   新手引导
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/34685564">
   精选
  </a>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/34685564">
   Python
  </a>
  <a class="internal" href="https://zhuanlan.zhihu.com/p/34685564">
   问答
  </a>
  |
  <a class="internal" href="http://zhuanlan.zhihu.com/p/36064871">
   Python单词表
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/36538511">
   区块链
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/36581953">
   人工智能
  </a>
  |
  <a class="internal" href="http://zhuanlan.zhihu.com/p/30932804">
   双11
  </a>
  |
  <a class="internal" href="http://zhuanlan.zhihu.com/p/29043669">
   嘻哈
  </a>
  |
  <a class="internal" href="http://zhuanlan.zhihu.com/p/28726244">
   爬虫
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/37430943">
   排序算法
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/37664927">
   我用Python
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/37814595">
   高考
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/37981169">
   世界杯
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/38822438">
   竞猜
  </a>
  |
  <a class="internal" href="https://zhuanlan.zhihu.com/p/38466193">
   requests
  </a>
 </p>
 <p>
  欢迎搜索及关注：
  <b>
   Crossin的编程教室
  </b>
 </p>
</div></body></html>